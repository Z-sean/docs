# 同源协议
- 协议 / 域名 / 端口 三者相同，则同源，否则就会触发跨域

# 解决方案
## JSONP
- 只能发送GET请求
- 返回的是函数，函数在前端定义，后端把值注入在函数参数中
- 只能处理简单的数据，不能处理复杂的数据
- 不安全，容易遭受XSS攻击
```javascript
 /*
 1. 创建script
 2. 创建一个完整的url
 3. 设置script.url = url
 4. 将script插入body
 5. 清理script 
 */
//客户端
 const jsonp = (url,callback)=>{
    const script = document.createElement('script');
    script.src = url;
    document.body.appendChild(script);
    return new Promise((resolve,reject)=>{
        window[callback] = (date)=>{
            resolve(date);
            document.body.removeChild(script);
        }
    })
    
jsonp(xxx,xxx).then(res=>{
    console.log("服务器数据是" +  res)
})
//服务端
...
 }
```
## 前端方案:前端代理
- 通过构建工具设置代理,通过构建工具创建一个服务器进行请求发送，只**对开发环境有效**，对**生产环境无效**
```js
export  default{
    server:{
        proxy:{
            '/api':{
                target:'http://localhost:3000',
                changeOrigin:true,
                pathRewrite:{
                    '^/api':''
                }
            }
        }
    }
}
```
## 后端方案:后端设置请求头
- 通过设置响应头，允许跨域请求（CROS），**对开发环境和生产环境都有效**
```js
setHeader('Access-Control-Allow-Origin','*')
```
## 运维方案:nginx代理
- 安装nginx，通过nginx配置文件设置代理，**对开发环境和生产环境都有效**

